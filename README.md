# CCC Project 


## 关于目前的版本：
有个很严重的问题，
master node读取全部的数据，我这里根本没有用到分开的计算。 
按照大佬的说法
大概有两种思路：

第一种是 所有人都load， 然后然后所有人都一起一行行读 但是 只有行号 n 符合条件 n % size == rank 的时候再处理， size是node总数 rank是当前node的编号

第二种是 先按文件尺寸把文件分成n块
比如 如果文件是 100  有两个node 就是 node 0: 0~50 node 1: 51~100 
但是这个位置不是准确的按行...所以要先跳到这个位置 向后找最近的一个换行符，那里才是真正的开始点（不过要注意开头和结尾之类的细节...反正就是不能有覆盖的地方 也不能漏掉）





# Some information extrated from lms discussion board: 

A student asked me after the lecture if regular expressions were needed to deal with hashtags used in substrings. Short answer is no. I only want / need SPACE#<STRING>SPACE. A few examples to illustrate (the quotation marks indication string start/end in the JSON file).

" #melbourne " and " #Melbourne " are  the same (as discussed previously even though upper/lower case differences)

"xyz#Melbourne" and " #Melbourne " are not the same - there is no space before the # in the first example

" #Melbourne " and " #melbourne! " or variations thereof are not the same (in the second example, the ! comes before a space is reached)

Ok?

Twitter documentation doesn't really apply here as they use hashtags for other things, e.g. topic modelling. I only need exact strings to match for this assignment. Things would get too complicated otherwise

url: https://app.lms.unimelb.edu.au/webapps/discussionboard/do/message?action=list_messages&course_id=_382322_1&nav=discussion_board_entry&conf_id=_813239_1&forum_id=_458671_1&message_id=_1870935_1

# Notice the format we are looking at: 

 IT is SPACE #STRING SPACE 

 关于读取：
 https://stackoverflow.com/questions/6886283/how-i-can-i-lazily-read-multiple-json-values-from-a-file-stream-in-python/7795029#7795029

 https://stackoverflow.com/questions/21533894/how-to-read-line-delimited-json-from-large-file-line-by-line

## 神坑： 我们要做的big的json格式和tiny格式不一样。
## sample format of bigTwitter json is:
请注意，coordinates 在bigTwitter里面是只有两个coordinates，而不是三个地方都有。
smallTwitter 和 tinyTwitter 有三个位置.
我们判断一个twitter是invalid，需要两个坐标都是空的才可以。 
同样的，拿#的内容，需要在"value""text"里面取,和tiny的格式也不一样。。
{"id":"493803077489537024","key":["melbourne",2014,7,28],"value":1,"doc":{"_id":"493803077489537024","_rev":"1-4a08370b5a1224a7dd3125f67d437c93","contributors":null,"truncated":false,"text":"Home Weather - Temp: 12.4 <C2><B0>C. Wind: 8.9 km/h NNE. Barometer: 1010.0 mb, Falling. Humidity: 74%.","in_reply_to_status_id":null,"favorite_count":0,"source":"<a href=\"http://sandaysoft.com/\" rel=\"nofollow\">Sandaysoft Cumulus</a>","retweeted":false,"coordinates":{"type":"Point","coordinates":[145.05,-37.97638889]},"entities":{"symbols":[],"user_mentions":[],"hashtags":[],"urls":[]},"in_reply_to_screen_name":null,"in_reply_to_user_id":null,"retweet_count":0,"id_str":"493803077489537024","favorited":false,"user":{"follow_request_sent":false,"profile_use_background_image":true,"default_profile_image":false,"id":95108665,"profile_background_image_url_https":"https://abs.twimg.com/images/themes/theme5/bg.gif","verified":false,"profile_text_color":"3E4415","profile_image_url_https":"https://pbs.twimg.com/profile_images/1958544942/DanBand_normal.jpg","profile_sidebar_fill_color":"99CC33","entities":{"description":{"urls":[]}},"followers_count":8,"profile_sidebar_border_color":"829D5E","id_str":"95108665","profile_background_color":"352726","listed_count":0,"is_translation_enabled":false,"utc_offset":36000,"statuses_count":419,"description":"","friends_count":29,"location":"Beaumaris, Australia","profile_link_color":"2F6A9E","profile_image_url":"http://pbs.twimg.com/profile_images/1958544942/DanBand_normal.jpg","following":false,"geo_enabled":true,"profile_banner_url":"https://pbs.twimg.com/profile_banners/95108665/1405166646","profile_background_image_url":"http://abs.twimg.com/images/themes/theme5/bg.gif","screen_name":"fowlerd303","lang":"en","profile_background_tile":false,"favourites_count":0,"name":"Daniel Fowler","notifications":false,"url":null,"created_at":"Mon Dec 07 01:21:08 +0000 2009","contributors_enabled":false,"time_zone":"Melbourne","protected":false,"default_profile":false,"is_translator":false},"geo":{"type":"Point","coordinates":[-37.97638889,145.05]},"in_reply_to_user_id_str":null,"lang":"et","created_at":"Mon Jul 28 17:00:02 +0000 2014","in_reply_to_status_id_str":null,"place":{"full_name":"Melbourne","url":"https://api.twitter.com/1.1/geo/id/01864a8a64df9dc4.json","country":"Australia","place_type":"city","bounding_box":{"type":"Polygon","coordinates":[[[144.593741856,-38.433859306],[145.512528832,-38.433859306],[145.512528832,-37.5112737225],[144.593741856,-37.5112737225]]]},"contained_within":[],"country_code":"AU","attributes":{},"id":"01864a8a64df9dc4","name":"Melbourne"},"metadata":{"iso_language_code":"et","result_type":"recent"},"location":"melbourne"}},
{"id":"493910189989302273","key":["melbourne",2014,7,29],"value":1,"doc":{"_id":"493910189989302273","_rev":"1-052fedd967e1d9f2c85ad7d4f9b50104","contributors":null,"truncated":false,"text":"Compensation for #economicrefugees WTF What about those #InjuredWorkers still waiting years for their #compensation. Get your ideals right","in_reply_to_status_id":null,"id":493910189989302300,"favorite_count":0,"source":"<a href=\"http://twitter.com/download/android\" rel=\"nofollow\">Twitter for Android</a>","retweeted":false,"coordinates":{"type":"Point","coordinates":[144.7293759,-37.5775285]},"entities":{"symbols":[],"user_mentions":[],"hashtags":[{"indices":[17,34],"text":"economicrefugees"},{"indices":[56,71],"text":"InjuredWorkers"},{"indices":[102,115],"text":"compensation"}],"urls":[]},"in_reply_to_screen_name":null,"in_reply_to_user_id":null,"retweet_count":0,"id_str":"493910189989302273","favorited":false,"user":{"follow_request_sent":false,"profile_use_background_image":true,"default_profile_image":false,"id":723038822,"profile_background_image_url_https":"https://abs.twimg.com/images/themes/theme1/bg.png","verified":false,"profile_text_color":"333333","profile_image_url_https":"https://pbs.twimg.com/profile_images/475112438480633856/ARxLGMiI_normal.jpeg","profile_sidebar_fill_color":"DDEEF6","entities":{"description":{"urls":[]}},"followers_count":1070,"profile_sidebar_border_color":"C0DEED","id_str":"723038822","profile_background_color":"C0DEED","listed_count":17,"is_translation_enabled":false,"utc_offset":null,"statuses_count":22626,"description":"Abuse of Animals & Children I hate.I miss my Mum. Lesbian.  I swear so if you don't like it don't follow. Tasmanian by birth & choice. Miss you too Weez.","friends_count":1322,"location":"Down Under","profile_link_color":"0084B4","profile_image_url":"http://pbs.twimg.com/profile_images/475112438480633856/ARxLGMiI_normal.jpeg","following":false,"geo_enabled":true,"profile_banner_url":"https://pbs.twimg.com/profile_banners/723038822/1390193033","profile_background_image_url":"http://abs.twimg.com/images/themes/theme1/bg.png","screen_name":"BernadetteSout1","lang":"en","profile_background_tile":false,"favourites_count":8770,"name":"Bernadette Southwell","notifications":false,"url":null,"created_at":"Sun Jul 29 00:01:53 +0000 2012","contributors_enabled":false,"time_zone":null,"protected":false,"default_profile":true,"is_translator":false},"geo":{"type":"Point","coordinates":[-37.5775285,144.7293759]},"in_reply_to_user_id_str":null,"lang":"en","created_at":"Tue Jul 29 00:05:40 +0000 2014","in_reply_to_status_id_str":null,"place":{"full_name":"Sunbury","url":"https://api.twitter.com/1.1/geo/id/01bd76d80f0324ea.json","country":"Australia","place_type":"city","bounding_box":{"type":"Polygon","coordinates":[[[144.680455008,-37.6036542495],[144.760199008,-37.6036542495],[144.760199008,-37.520261374],[144.680455008,-37.520261374]]]},"contained_within":[],"country_code":"AU","attributes":{},"id":"01bd76d80f0324ea","name":"Sunbury"},"metadata":{"iso_language_code":"en","result_type":"recent"},"location":"melbourne"}},



 ## a Sample format of a smallTwitter json is: 
{"total_rows":3877777,"offset":805584,"rows":[
{"id":"570379215192727552","key":["r1r01cdn8nb4",2015,2,25],"value":{"type":"Feature","geometry":{"type":"Point","coordinates":[144.92340088,-37.95935781]},"properties":{"created_at":"Wed Feb 25 00:26:16 +0000 2015","text":"For the Oscars, Lady Gaga trained with a vocal coach DAILY for 6 months http://t.co/DIIS5EtsW9 #melbourne http://t.co/ZSu8FifNUK","location":"melbourne"}},"doc":{"_id":"570379215192727552","_rev":"1-fa6a485cb4fe0575781b6c29286af554","contributors":null,"truncated":false,"text":"For the Oscars, Lady Gaga trained with a vocal coach DAILY for 6 months http://t.co/DIIS5EtsW9 #melbourne http://t.co/ZSu8FifNUK","in_reply_to_status_id":null,"favorite_count":0,"source":"<a href=\"http://dlvr.it\" rel=\"nofollow\">dlvr.it</a>","retweeted":false,"coordinates":{"type":"Point","coordinates":[144.92340088,-37.95935781]},"entities":{"symbols":[],"user_mentions":[],"hashtags":[{"indices":[95,105],"text":"melbourne"}],"urls":[{"url":"http://t.co/DIIS5EtsW9","indices":[72,94],"expanded_url":"http://j.mp/1ag2Quk","display_url":"j.mp/1ag2Quk"}],"media":[{"expanded_url":"http://twitter.com/ynnmedianetwork/status/570379215192727552/photo/1","display_url":"pic.twitter.com/ZSu8FifNUK","url":"http://t.co/ZSu8FifNUK","media_url_https":"https://pbs.twimg.com/media/B-pk38nVEAAP9dj.jpg","id_str":"570379215142457344","sizes":{"large":{"h":380,"resize":"fit","w":380},"small":{"h":340,"resize":"fit","w":340},"medium":{"h":380,"resize":"fit","w":380},"thumb":{"h":150,"resize":"crop","w":150}},"indices":[106,128],"type":"photo","id":570379215142457340,"media_url":"http://pbs.twimg.com/media/B-pk38nVEAAP9dj.jpg"}]},"in_reply_to_screen_name":null,"in_reply_to_user_id":null,"retweet_count":0,"id_str":"570379215192727552","favorited":false,"user":{"follow_request_sent":false,"profile_use_background_image":true,"profile_text_color":"333333","default_profile_image":false,"id":2543131938,"profile_background_image_url_https":"https://abs.twimg.com/images/themes/theme1/bg.png","verified":false,"profile_location":null,"profile_image_url_https":"https://pbs.twimg.com/profile_images/567602629937606657/ZCcCDFzr_normal.jpeg","profile_sidebar_fill_color":"DDEEF6","entities":{"url":{"urls":[{"url":"http://t.co/lSobtgeAxq","indices":[0,22],"expanded_url":"http://youthsnews.com.au","display_url":"youthsnews.com.au"}]},"description":{"urls":[]}},"followers_count":68313,"profile_sidebar_border_color":"C0DEED","id_str":"2543131938","profile_background_color":"C0DEED","listed_count":6,"is_translation_enabled":false,"utc_offset":36000,"statuses_count":1390,"description":"media network","friends_count":788,"location":"pacific, oceania","profile_link_color":"042A38","profile_image_url":"http://pbs.twimg.com/profile_images/567602629937606657/ZCcCDFzr_normal.jpeg","following":false,"geo_enabled":true,"profile_banner_url":"https://pbs.twimg.com/profile_banners/2543131938/1424079798","profile_background_image_url":"http://abs.twimg.com/images/themes/theme1/bg.png","name":"ynnmedia™","lang":"en","profile_background_tile":false,"favourites_count":765,"screen_name":"ynnmedianetwork","notifications":false,"url":"http://t.co/lSobtgeAxq","created_at":"Tue Jun 03 09:27:23 +0000 2014","contributors_enabled":false,"time_zone":"Yakutsk","protected":false,"default_profile":false,"is_translator":false},"geo":{"type":"Point","coordinates":[-37.95935781,144.92340088]},"in_reply_to_user_id_str":null,"possibly_sensitive":false,"lang":"en","created_at":"Wed Feb 25 00:26:16 +0000 2015","in_reply_to_status_id_str":null,"place":null,"metadata":{"iso_language_code":"en","result_type":"recent"},"location":"melbourne"}},